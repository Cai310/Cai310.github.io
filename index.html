<!DOCTYPE html>
<html>
<head>
    <title>é›†ä¸­è¥å®˜ç½‘</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .file-item { border: 1px solid #ddd; padding: 10px; margin: 10px 0; border-radius: 5px; }
        .submit-btn { background: #4CAF50; color: white; padding: 10px 20px; text-decoration: none; border-radius: 5px; display: inline-block; margin-top: 20px; }
    </style>
</head>
<body>
    <h1>æ¬¢è¿æ¥åˆ°é›†ä¸­è¥å®˜ç½‘</h1>
    <p>è¿™é‡Œæ˜¯é€šçŸ¥å‘å¸ƒä¸­å¿ƒ ğŸ“š</p>
    
    <!-- æ–‡ä»¶åˆ—è¡¨åŒºåŸŸ -->
    <h2>ğŸ“ æ–‡ä»¶ä¸‹è½½åŒº</h2>
    <div id="homework-list">
        <!-- LeanCloud æ–‡ä»¶é“¾æ¥å°†åŠ¨æ€æ˜¾ç¤ºåœ¨è¿™é‡Œ -->
        <p>æ­£åœ¨åŠ è½½åˆ—è¡¨...</p>
    </div>

    <!-- æ›¿æ¢æäº¤æŒ‰é’®ä¸ºè…¾è®¯æ–‡æ¡£é“¾æ¥ -->
    <a href="https://docs.qq.com/form/page/DUEdQR3BpS1dLalZU" 
       class="submit-btn"
       style="background-color: #07C160;">
       ç‚¹æˆ‘æäº¤ä½œä¸šï¼ˆè…¾è®¯æ–‡æ¡£ï¼‰
    </a>

    <!-- å¼•å…¥ LeanCloud SDK -->
    <script src="//unpkg.com/leancloud-storage@4.13.2/dist/av-min.js"></script>
    <script>
        // ============ é…ç½® LeanCloud ============ 
        var APP_ID = 'uF0m5bBb1Ks0g93GA52i8XuS-MdYXbMMI';  // å¾…ä¼šå„¿æ›¿æ¢
        var APP_KEY = 'WE33RHP20LnBxJZqcZC9CFdG'; // å¾…ä¼šå„¿æ›¿æ¢
        
        AV.init({ appId: APP_ID, appKey: APP_KEY });
        
        // ============ åŠ è½½æ–‡ä»¶åˆ—è¡¨ ============ 
        function loadFiles() {
            var query = new AV.Query('_File');
            query.descending('createdAt'); // æŒ‰ä¸Šä¼ æ—¶é—´å€’åº
            
            query.find().then(function (files) {
                var listHTML = '';
                files.forEach(function(file) {
                    // åªæ˜¾ç¤ºPDF/TXT/Word/Excelæ–‡ä»¶
                    var ext = file.get('name').split('.').pop().toLowerCase();
                    if (['pdf','txt','doc','docx','xls','xlsx'].includes(ext)) {
                        listHTML += `
                        <div class="file-item">
                            <strong>${file.get('name')}</strong> 
                            <a href="${file.get('url')}" download>â†“ä¸‹è½½</a>
                            <span>(${new Date(file.createdAt).toLocaleDateString()})</span>
                        </div>`;
                    }
                });
                
                document.getElementById('homework-list').innerHTML = 
                    listHTML || '<p>æš‚æ— æ–‡ä»¶</p>';
            });
        }
        
        // é¡µé¢åŠ è½½æ—¶æ‰§è¡Œ
        window.onload = loadFiles;
    </script>
</body>
</html>
